# Rust Python Book Study

[파이썬 프로그래머를 위한 러스트 입문](https://indosaram.github.io/rust-python-book/)을 읽고 학습한 내용을 정리합니다.

## 목차

- [Rust Python Book Study](#rust-python-book-study)
  - [목차](#목차)
  - [프로젝트 생성 및 실행](#프로젝트-생성-및-실행)
    - [rust 프로젝트 생성](#rust-프로젝트-생성)
    - [rust 프로젝트 컴파일](#rust-프로젝트-컴파일)
    - [rust 프로젝트 실행](#rust-프로젝트-실행)
    - [포맷팅](#포맷팅)
  - [값 출력하기](#값-출력하기)
  - [변수](#변수)
    - [변수 선언](#변수-선언)
    - [명명 규칙](#명명-규칙)
  - [불변성](#불변성)
    - [섀도잉](#섀도잉)
  - [타입](#타입)

## 프로젝트 생성 및 실행

### rust 프로젝트 생성

1. `cargo init`:
   현재 디렉토리에 프로젝트를 생성합니다.
   ```
   .
   ├── Cargo.toml
   └── src
       └── main.rs
   ```
2. `cargo new < 프로젝트 이름 >`:
   현재 디렉토리에 해당 프로젝트 이름으로 프로젝트를 생성합니다.
   ```
   .
   └──프로젝트 이름
       ├── Cargo.toml
       └── src
           └── main.rs
   ```

### rust 프로젝트 컴파일

1. `cargo build`:
   프로젝트를 디버그 모드로 빌드합니다.  
   빌드된 파일은 `target/debug`에 해당 프로젝트 이름의 바이너리 파일로 생성됩니다.  
   디버그 모드로 빌드가 될 경우, 컴파일은 빠르지만 실행 속도가 느리고, 컴파일된 바이너리 파일의 크기가 큽니다.  
   따라서 실제 서비스에 사용할 경우에는 `cargo build --release`로 릴리즈 모드로 빌드해야 합니다.
2. `cargo build --release`:
   프로젝트를 릴리즈 모드로 빌드합니다.  
   빌드된 파일은 `target/release`에 해당 프로젝트 이름의 바이너리 파일로 생성됩니다.  
   릴리즈 모드로 빌드가 될 경우, 컴파일은 느리지만 실행 속도가 빠르고, 컴파일된 바이너리 파일의 크기가 작습니다.

### rust 프로젝트 실행

`cargo run` 명령어로 프로젝트를 빌드부터 실행까지 한 번에 진행할 수 있습니다.  
마찬가지로, `--release` 옵션을 추가하면 릴리즈 모드로 빌드부터 실행까지 한 번에 진행할 수 있습니다.

### 포맷팅

`rustfmt`은 rust 코드를 포맷팅해주는 도구입니다.  
VSC에서는 `Alt + Shift + F`(Window, Linux), `⌥ + ⇧ + F`(Mac) 단축키로 포맷팅할 수 있습니다.

## 값 출력하기

`println!` 매크로를 사용하여 값을 출력할 수 있습니다.  
매크로란 사전에 정의된 편리한 기능을 의미하고, 항상 뒤에 `!`가 붙습니다.
```rust
println!("Hello, world!");
```

만약 변수를 출력하고 싶다면, `{}`를 사용하여 출력할 수 있습니다.
```rust
let x = 10;
println!("x = {}", x); // x = 10
```

## 변수

변수는 값을 저장하는 공간입니다.

### 변수 선언

파이썬에서는 변수 선언시 `=`만 있으면 됩니다.

```python
x = 10  # No problem
```

타입을 미리 지정할 수 있지만, 필수는 아닙니다.

```python
x: int = 10  # No problem
```

또한 지정된 타입을 무시할 수 있습니다.

```python
x: float = 10  # No problem
```

사실상 타입 지정이라기 보단, 이후 코드를 짤 때 작성자에게 힌트를 주는 것에 가깝기에 타입 힌트라는 말을 사용합니다.

러스트에서는 변수 선언시 `let` 키워드를 사용합니다.  
또한 타입을 지정해줘야 합니다.

```rust
let x: i32 = 10;  // No problem
```

다만 타입을 미리 지정하지 않아도, 일부 경우에는 컴파일러가 타입을 추론해줍니다.

```rust
let x = 10;  // No problem
```

이외에도 `const` 키워드를 사용하여 상수를 선언할 수 있습니다.  
상수는 값을 변경할 수 없습니다.

```rust
const X = 10;  // No problem
X = 20;  // Error
```

### 명명 규칙

파이썬과 러스트는 거의 동일한 명명 규칙을 가지고 있습니다.  
변수와 함수는 스네이크(소문자와 언더바), 클래스(구조체)는 파스칼(대문자로 시작하는 카멜), 상수는 스크리밍 스네이크(모두 대문자)로 명명합니다.

## 불변성

파이썬은 대부분의 경우 변수의 값을 자유롭게 변경할 수 있습니다.

```python
x = 10
x = "10"
x = 1, 0
```

러스트는 기본적으로 변수의 값을 변경할 수 없습니다.

```rust
let x = 10;
x = 20;  // Error
```

하지만 `mut` 키워드를 사용하여 변수의 값을 변경할 수 있습니다.

```rust
let mut x = 10;
x = 20;  // No problem
```

물론 이는 같은 형의 경우에만 가능하고, 다른 형의 경우에는 에러가 발생합니다.

```rust
let mut x = 10;
x = "20";  // Error
```

### 섀도잉

러스트에서는 기본적으로 변수의 값을 변경할 수 없지만, `let` 키워드를 사용해 변수를 새로이 선언할 수 있습니다.  
이를 섀도잉(shadowing)이라고 합니다.  
섀도잉은 형 또한 변경할 수 있습니다.

```rust
let x = 10;
x = 20;  // Error
let x = 20;  // No problem
let x = "20";  // No problem
```

## 타입

파이썬은 모든 것이 객체입니다.  
즉, 원시 타입이 존재하지 않습니다.  
이와는 다르게 러스트는 원시 타입이 존재합니다.

- 정수형  
   | 크기\부호유무 | 부호 있음 | 부호 없음 |
  |:---:|:---:|:---:|
  | 아키텍쳐[^아키텍쳐] | `isize` | `usize` |
  | 8비트 | `i8` | `u8` |
  | 16비트 | `i16` | `u16` |
  | 32비트 | `i32` | `u32` |
  | 64비트 | `i64` | `u64` |
  | 128비트 | `i128` | `u128` |

    [^아키텍쳐]: 현재 실행 중인 프로그램의 아키텍쳐에 따라 결정됩니다. 예를 들어 64비트 아키텍쳐에서는 `isize`는 `i64`와 같습니다.


